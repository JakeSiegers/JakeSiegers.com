var touchMode=false;function addCls(el,clsToAdd){if(el.className.trim()===''){el.className+=clsToAdd;}else{el.className+=" "+clsToAdd;}}
function removeCls(el,clsToRemove){var classes=el.className.split(" ");var newClasses=[];classes.forEach(function(cls){if(cls!==clsToRemove){newClasses.push(cls);}});el.className=newClasses.join(" ");}
function showTitle(){var title=document.getElementById('title');var menu=document.getElementById('menu');setTimeout(function(){title.style.transition="opacity 0.5s ease";menu.style.transition="opacity 0.5s ease";},0);setTimeout(function(){title.style.opacity=1;menu.style.opacity=1;},100);centerContent();setTimeout(function(){var titleWrap=document.getElementById('titleWrap');titleWrap.style.transition="all 0.5s ease";},0);}
function initMenu(){document.getElementById('emailLink').onclick=function(event){event.preventDefault();changeContent('email','red');};document.getElementById('projectLink').onclick=function(event){event.preventDefault();changeContent('portfolio','green');};document.body.addEventListener('touchstart',function(e){if(!touchMode){var boxes=document.getElementsByClassName('zoomBox');for(var i in boxes){addCls(boxes[i],'zoomBoxTouch');}}
touchMode=true;},false);}
var screenshots={'mg':5,'mgvis':3,'alex':4,'bbqk':3,'puzzle':3};var screenshotCount=0;function showScreenshots(event,screenshotSet){event.preventDefault();if(screenshotCount>0){return;}
event.target.innerHTML='<span style="color:#009688;">[ LOADING... ]</span>';var screenshotContent=document.getElementById('screenshotContent');var html='<a class="projectBack" onclick="changeContent(\'portfolio\',\'green\')" >[ Back to Projects ]</a>';for(var i=1;i<=screenshots[screenshotSet];i++){html+='<img src="img/screenshots/'+screenshotSet+i+'.jpg" class="screenshot"/>';var downloadingImage=new Image();screenshotCount++;downloadingImage.onload=function(){screenshotCount--;if(screenshotCount===0){changeContent('screenshot','green');event.target.innerHTML='[ Screenshots ]';}};downloadingImage.src='img/screenshots/'+screenshotSet+i+'.jpg';}
screenshotContent.innerHTML=html;}
var contentType=null;var contentTimeout=null;function changeContent(type,color){if(screenshotCount>0){return;}
if(sendingEmail){return;}
var content=document.getElementById('content');if(contentType===type){vis.setColorPalette('blue');closeContent();}else if(contentType!==null){closeContent();if(contentTimeout!==null){clearTimeout(contentTimeout);}
contentTimeout=setTimeout(function(){showContent(type,color)},500);}else{showContent(type,color)}}
function closeContent(){var content=document.getElementById('content');centerContent(-content.offsetHeight);removeCls(content,'showContent');content.style.height='0px';contentType=null;}
function showContent(type,color){var content=document.getElementById('content');vis.setColorPalette(color);var newContent=document.getElementById(type+'Content');content.innerHTML=newContent.innerHTML;centerContent(newContent.offsetHeight);addCls(content,'showContent');content.style.height=newContent.offsetHeight+'px';contentType=type;}
function centerContent(buffer){if(contentType!==null){var content=document.getElementById('content');var activeContent=document.getElementById(contentType+'Content');content.style.height=activeContent.offsetHeight+'px';}
if(!buffer){buffer=0;}
var titleWrap=document.getElementById('titleWrap');var screenHeight=window.innerHeight;var newMargin=30;var totalHeight=titleWrap.offsetHeight+buffer;if((totalHeight/2)>screenHeight/2){newMargin=20;}else{newMargin=(screenHeight/2)-(totalHeight/2);}
titleWrap.style.marginTop=newMargin+'px';}
var sendingEmail=false;function sendMessage(btn){if(sendingEmail){return;}
var fields=btn.parentElement.getElementsByClassName("formField");var postData=[];for(var i=0;i<fields.length;i++){postData.push(fields[i].name+'='+encodeURI(fields[i].value));removeCls(fields[i],'formError');}
var http=new XMLHttpRequest();var url="https://beta.jakesiegers.com/mail.php";var params=postData.join("&");http.open("POST",url,true);btn.style.backgroundColor='rgba(255,255,255,0.3)';btn.innerHTML='Sending...';sendingEmail=true;http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.onreadystatechange=function(){if(http.readyState===4){sendingEmail=false;var reply={};try{reply=JSON.parse(http.responseText);if(reply.success===true){btn.parentElement.reset();btn.style.backgroundColor='#81C784';btn.innerHTML='Message Sent, Thanks!';}else{for(var i in reply.fields){var field=document.getElementsByName(reply.fields[i])[0];addCls(field,'formError');btn.innerHTML=reply.error;}}}catch(e){btn.style.backgroundColor='#E57373';btn.innerHTML='Unknown Error, Sorry!';}}};http.send(params);}
var vis=null;window.onload=function(){showTitle();vis=new Visualizer();initMenu();window.onresize=function(){centerContent();};};function Visualizer(){this.trigCount=0;this.visPos={};this.currentVisuals=[];this.visColors={blue:{C900:'#0D47A1',C700:'#1976D2',C500:'#2196F3',A700:'#2962FF'},red:{C900:'#B71C1C',C700:'#D32F2F',C500:'#F44336',A700:'#D50000'},brown:{C900:'#3E2723',C700:'#5D4037',C500:'#795548',A700:'#A1887F'},green:{C900:'#004D40',C700:'#00796B',C500:'#009688',A700:'#00BFA5'}};this.currentColorPalette=this.visColors.blue;this.visuals={0:function(){this.setColor('C500');for(var i=5;i<=10;i++){this.drawCircle(this.visPos.x,this.visPos.y,i,2,1,1);}}.bind(this),1:function(){this.setColor('C900');this.drawCircle(this.visPos.x,this.visPos.y,6+Math.sin(this.trigCount)*3,3,-2,-2);this.setColor('C500');this.drawCircle(this.visPos.x,this.visPos.y,6+Math.sin(this.trigCount)*3,3,2,2);}.bind(this),2:function(){this.setColor('C700');this.drawCircle(this.visPos.x,this.visPos.y,10+Math.cos(this.trigCount)*5,30);}.bind(this),3:function(){this.setColor('C500');this.drawCircle(this.visPos.x,this.visPos.y,5,30,1);this.setColor('C900');this.drawCircle(this.visPos.x,this.visPos.y,5,2,1,1);}.bind(this),4:function(){this.setColor('C700');this.drawCircle(this.visPos.x,this.visPos.y,2,2,1,1);this.setColor('C900');this.drawCircle(this.visPos.x,this.visPos.y,5,3,1,1);this.setColor('C500');this.drawCircle(this.visPos.x,this.visPos.y,10,5,1,1);}.bind(this),5:function(){this.setColor('A700');this.drawCircle(this.visPos.x,this.visPos.y,5,3,-1,1);}.bind(this),6:function(){for(var i=0;i<this.canvas.width;i++){if(i%2===0){this.setColor('C700');this.drawRect(i,(this.canvas.height/2)+Math.sin(this.trigCount*(i+1))*(this.canvas.height/4));}}}.bind(this),7:function(){for(var i=0;i<this.canvas.width;i++){if(i%2!==0){this.setColor('C500');this.drawRect(i,(this.canvas.height/2)+Math.sin(this.trigCount*(i+1))*(this.canvas.height/4));}}}.bind(this),8:function(){this.setColor('A700');for(var i=-2;i<=2;i++){var pos=(Math.sin(this.trigCount)*288)+288;pos=pos+(i);this.drawRect((pos%32),Math.floor(pos/32));}}.bind(this)};this.numVisuals=Object.keys(this.visuals).length;this.canvas=document.querySelector('#visualizer');this.canvasCtx=this.canvas.getContext("2d");this.canvasCtx.fillStyle='rgb(51,51,51)';this.canvasCtx.fillRect(0,0,this.canvas.width,this.canvas.height);this.visPos.x=this.canvas.width/2;this.visPos.y=this.canvas.height/2;requestAnimationFrame(this.draw.bind(this));this.changeVisual();}
Visualizer.prototype.setColorPalette=function(palette){this.currentColorPalette=this.visColors[palette];};Visualizer.prototype.setColor=function(color){this.canvasCtx.fillStyle=this.currentColorPalette[color];};Visualizer.prototype.changeVisual=function(){this.currentVisuals[0]=Math.floor(Math.random()*(this.numVisuals));this.currentVisuals[1]=Math.floor(Math.random()*(this.numVisuals));};Visualizer.prototype.draw=function(){this.canvasCtx.drawImage(this.canvasCtx.canvas,0,0,this.canvas.width,this.canvas.height,-1,-1,this.canvas.width+2,this.canvas.height+2);this.canvasCtx.fillStyle='rgba(51,51,51,0.01)';this.canvasCtx.fillRect(0,0,this.canvas.width,this.canvas.height);this.trigCount+=0.005;if(this.trigCount>Math.PI*2){this.trigCount=0;this.changeVisual();}
for(var i in this.currentVisuals){this.visuals[this.currentVisuals[i]]();}
requestAnimationFrame(this.draw.bind(this));};Visualizer.prototype.drawCircle=function(x,y,width,numPixels,spinX,spinY){for(var i=0;i<(2*Math.PI);i+=(2*Math.PI/numPixels)){this.drawRect(x
+(Math.cos((spinX?this.trigCount*spinX:0)+i)*width),y
+(Math.sin((spinY?this.trigCount*spinY:0)+i)*width));}};Visualizer.prototype.drawRect=function(x,y){this.canvasCtx.fillRect(x,y,1,1);};